<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Contattami</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 32px; line-height:1.4; }
    table { border-collapse: collapse; width: 100%; max-width: 800px; margin-bottom: 24px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    form { max-width: 800px; }
    label { display: block; margin: 6px 0 2px; font-weight:600; }
    input, textarea { width: 100%; padding: 8px; border: 1px solid #bbb; border-radius: 4px; box-sizing: border-box; }
    button { margin-top: 10px; padding: 8px 12px; cursor: pointer; }
    .note { color:#666; font-size:0.9rem; margin-top:10px; }
  </style>

  <!-- EmailJS client -->
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Inizializza EmailJS con la tua Public Key
      emailjs.init("2OAQ7jl03FK9UkdPU");
    });
  </script>
</head>

<body>
  <h1>La mia tabella</h1>

  <table>
    <thead>
      <tr><th>ID</th><th>Nome</th><th>Note</th></tr>
    </thead>
    <tbody>
      <tr><td>1</td><td>Mario Rossi</td><td>Cliente A</td></tr>
      <tr><td>2</td><td>Giulia Bianchi</td><td>Cliente B</td></tr>
    </tbody>
  </table>

  <h2>Contattami</h2>
  <form id="contactForm">
    <label for="name">Nome</label>
    <input id="name" name="name" type="text" required>

    <label for="email">Email</label>
    <input id="email" name="email" type="email" required>

    <label for="message">Messaggio</label>
    <textarea id="message" name="message" rows="5" required></textarea>

    <button type="submit">Invia</button>
  </form>

  <p class="note">I messaggi inviati verranno inoltrati all'email configurata nel tuo template EmailJS.</p>

  <script>
    document.getElementById("contactForm").addEventListener("submit", function(e){
      e.preventDefault();

      // invia tramite EmailJS: SERVICE ID e TEMPLATE ID che mi hai dato
      emailjs.sendForm("service_pwtildo", "template_ijobjpb", this)
        .then(function(){
          alert("Messaggio inviato con successo!");
          document.getElementById("contactForm").reset();
        }, function(err){
          console.error("Errore EmailJS:", err);
          alert("Errore nell'invio. Apri la console del browser per dettagli.");
        });
    });
  </script>
</body>
</html>
